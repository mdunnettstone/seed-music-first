<div class = "container">
  <div class = "row">
    <div class = "booyah-box col-12 px-0 text-center mb-4">
      <div class = "top-half-booyah-box col-12 mx-0">
        <% if @room.photo.present? %>
          <%= image_tag(@room.photo, class: "user-image-circle mt-5 mb-1") %>
        <% else %>
          <%= image_tag('instruments-placeholder.png', class: "user-image-circle mt-5 mb-1") %>
        <% end %>
        <h1 class = "mt-2"><%= @room.name %></h1>
      </div>
      <div class = "row mt-3">
        <div class = "col-12">
          <div class = "col-md-6 mb-3">
            <div class = "col-12 booyah-box pb-2">
              <h3 class = "mt-3 mb-2"><i class="fa fa-music" aria-hidden="true"></i> Facilities</h3>
              <div class = "col-12">
                <hr class = "mt-0 mb-3">
              </div>
              <p><i class="fa fa-users" aria-hidden="true"></i> Capacity: <%= @room.capacity %></p>
              <% @room.facilities.each do |facility| %>
                <span class = "badge badge-info"><%= facility.full_facility %></span>
              <% end %>
            </div>
          </div>
          <div class = "col-md-6">
            <div class = "col-12 booyah-box">
              <h3 class = "mt-3 mb-2"><i class="fa fa-info-circle" aria-hidden="true"></i> Information</h3>
              <div class = "col-12">
                <hr class = "mt-0 mb-3">
              </div>
              <p>Address: <%= @room.address %></p>
            </div>
          </div>
        </div>
      </div>
      <div class = "row">
        <div class = "col-12">
          <h3><%= "You have #{@bookings.length} upcoming bookings here"%></h3>
          <% if @bookings.length > 0 %>
            <% @bookings.each do |booking| %>
              <div class="col-12 col-sm-6">
                <div class="card">
                  <div class="card-block">
                    <h3 class="card-title mt-1"><%= booking.start_time.strftime("%a, %e %b %Y") %></h3>
                    <p class = "card-text"><i class="fa fa-clock-o" aria-hidden="true"></i> <%= "#{booking.start_time.strftime("%H:%M")} - #{booking.end_time.strftime("%H:%M")}" %></p>
                    <p class="card-text"><i class="fa fa-map-marker" aria-hidden="true"></i> &nbsp<%= booking.room.name %></p>
                    <p class = "card-text"><i class="fa fa-users" aria-hidden="true"></i> <%= booking.user_list %></p>
                    <%= link_to 'View booking', booking_path(booking), class: "btn btn-primary" %>
                  </div>
                </div>
                <br />
              </div>
            <% end %>
          <% else %>
            <div class = "row">
              <div class="alert alert-warning col-10 offset-1" role="alert">
                <strong>Oh no!</strong> You have no upcoming bookings in this room :(
              </div>
            </div>
          <% end %>
        </div>
      </div>
      <br />
      <!-- Large modal -->
      <div class = "row">
        <button class="btn btn-primary col-10 offset-1" data-toggle="modal" data-target=".bd-example-modal-lg">Tell us about this room</button>
      </div>
      <div class = "clear"></div>
      <br />
    </div>
  </div>
</div>

<div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
   <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Tell us something</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
        <%= simple_form_for @room_comment, url: room_room_comments_path(@room) do |f| %>
      <div class="modal-body">
          <%= f.input :category, collection: RoomComment::CATEGORIES %>
          <%= f.input :message %>
          
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <%= f.submit "Send message", class: 'btn btn-primary' %>
        <% end %>
      </div>
    </div>
  </div>
</div>



